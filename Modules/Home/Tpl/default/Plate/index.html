<?php
$condition = 'spgCode=' . ( !empty($spgCode) ? $spgCode :  GROUP_NAME . '_' . MODULE_NAME . '_' . ACTION_NAME );
$menuType = C('MENU_TYPE');
?>

<model model="Plate" app="Home" fun="getPlate" condition="$condition" order="" limit="" key="i">

<volist name="result[$spgCode]" id="list">
<div class="row">
	<volist name="list" id="row">
	<?php $spClassArr = explode(',',strtr($row['conf']['spClass'],array('，'=>','))); ?>
	<div class="spjc <notempty name="spClassArr[$key-1]">{$spClassArr[$key-1]}</notempty>">
		<volist name="row['data']" id="vo">
		<div class="spcjc {$vo['spcClass']}">
			<?php
			unset($appName,$cateModel,$infoModel,$plateCondition);
			$name = $menuType[$vo['model']]['name'];
			$appName = $menuType[$vo['model']]['appName'];
			$cateModel = $name . $menuType[$vo['model']]['cateModel'];
			$infoModel = $name . $menuType[$vo['model']]['infoModel'];
			?>

			{//广告 开始}
			<if condition=" $vo['model'] == 0 ">
			<?php $apCode = $vo['model_value']; ?>
			<require file="Home,Ad/index" />
			{//广告 结束}

			{//单篇内容 开始}
			<elseif condition=" $vo['model'] == 1 && $vo['type'] == 3 " />
			<?php $plateCondition = 'status=1&' . getModelPk($infoModel) . '='.$vo['model_value']; ?>
			<model model="$infoModel" app="$appName" fun="getInfo" condition="$plateCondition" order="" limit="" key="i" result="info">
			{$info['description']}
			</model>
			{//单篇内容 结束}

			{//列表 开始}
			<elseif condition=" in_array($vo['model'],array(1,4)) &&  $vo['type'] == 1 " />
			<?php $plateCondition = 'status=1&' . getModelPk($cateModel) . '='.$vo['model_value']; $listType = $vo['list_opt']; ?>
			<model model="$cateModel" app="$appName" fun="getInfo" condition="$plateCondition" order="" limit="" key="i" result="info">
			<require file="Home,Public/list" />
			</model>
			{//列表 结束}

			{//分类 开始}
			<elseif condition=" in_array($vo['model'],array(1,4)) &&  $vo['type'] == 2 " />
			<?php $plateCondition = 'status=1&parent_id='.$vo['model_value']; ?>
			<model model="$cateModel" app="$appName" fun="getInfo" condition="$plateCondition" order="" limit="" key="i" result="info">
			<a target="_blank" href="{:getUrl( $cateModel, $info )}" title="{$info['name']}">{$info['name']}</a>
			</model>
			{//分类 结束}

			</if>
		</div>
		</volist>
	</div>
	</volist>
</div>
</volist>

</model>

<?php unset($spgCode,$condition); ?>
